vcpkg_from_github(
	OUT_SOURCE_PATH SOURCE_PATH
	REPO iswenzz/CoD4-DM1
	REF 38969302599a8366016227075a2c7e291c54ed0b
	SHA512 31c8b4dd7ceeb97f027f89ae8ba8398824b8c8ebcee98dc3393b44de35f00710fa73b5579d28a4c8b6df2c1e47944eb3e12bcca8bb62b7d2580f2329efd10dde
	HEAD_REF master
)

set(VCPKG_POLICY_DLLS_WITHOUT_EXPORTS enabled)
set(VCPKG_POLICY_DLLS_WITHOUT_LIBS enabled)

vcpkg_cmake_configure(SOURCE_PATH "${SOURCE_PATH}")
vcpkg_cmake_install()
vcpkg_cmake_config_fixup(CONFIG_PATH "lib/cmake/CoD4DM1")

file(INSTALL "${SOURCE_PATH}/README.md" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")
file(INSTALL "${SOURCE_PATH}/LICENSE" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
file(INSTALL "${CMAKE_CURRENT_LIST_DIR}/usage" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")

file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/include")

if(VCPKG_LIBRARY_LINKAGE STREQUAL "dynamic")
	file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/lib")
	file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/lib")
endif()
