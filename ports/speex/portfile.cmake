vcpkg_from_github(
	OUT_SOURCE_PATH SOURCE_PATH
	REPO iswenzz/speex
	REF a4db0833bf923c84a331ab20f56d647a7034c69d
	SHA512 5432ec77cab5289141248ec433da79bd370009e2d46e1ec6d3fd6c14c10df858c1e22daf1b5b41f081b9abecc91568358af35b6a9e271f3b85791c15d2f15b57
	HEAD_REF master
)

if(VCPKG_TARGET_ARCHITECTURE MATCHES "x86")
	if(VCPKG_TARGET_IS_MINGW OR VCPKG_TARGET_IS_LINUX)
		set(VCPKG_C_FLAGS "${VCPKG_C_FLAGS} -m32")
		set(VCPKG_CXX_FLAGS "${VCPKG_CXX_FLAGS} -m32")
	endif()
endif()

vcpkg_cmake_configure(SOURCE_PATH "${SOURCE_PATH}")
vcpkg_cmake_install()

file(INSTALL "${SOURCE_PATH}/README" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")
file(INSTALL "${SOURCE_PATH}/COPYING" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)

file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug")
