vcpkg_from_github(
	OUT_SOURCE_PATH SOURCE_PATH
	REPO iswenzz/speex
	REF ed7a90f13357f435ef9c8b67a0a249b8bf016d61
	SHA512 d652d835898e694740f1366e5b86e65261ea0adfd4300d68c6d1dbc56d7c36c77b97518a357babe400e22a309e4918389b21de0a2e0f970de33c2e0da0040a73
	HEAD_REF master
)

if(VCPKG_TARGET_ARCHITECTURE MATCHES "x86")
	if(VCPKG_TARGET_IS_MINGW OR VCPKG_TARGET_IS_LINUX)
		set(VCPKG_C_FLAGS "${VCPKG_C_FLAGS} -m32")
		set(VCPKG_CXX_FLAGS "${VCPKG_CXX_FLAGS} -m32")
	endif()
endif()

vcpkg_cmake_configure(SOURCE_PATH "${SOURCE_PATH}")
vcpkg_cmake_install()
vcpkg_cmake_config_fixup(CONFIG_PATH "lib/cmake/speex")

file(INSTALL "${SOURCE_PATH}/README" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")
file(INSTALL "${SOURCE_PATH}/COPYING" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)
file(INSTALL "${CMAKE_CURRENT_LIST_DIR}/usage" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}")

file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug")
